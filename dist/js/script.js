$(function(){let e=!1,o="paint";const t=$("#paint"),n=t[0].getContext("2d"),a=$("#canvas-container"),i={x:0,y:0},c=$("#erase"),l=$("#reset"),s=$("#save"),r=$("#paintColor"),u=$("#circle");n.lineWidth=3,n.lineJoin="round",n.lineCap="round",a.mousedown(function(o){e=!0,n.beginPath(),i.x=o.pageX-this.offsetLeft,i.y=o.pageY-this.offsetTop,n.moveTo(i.x,i.y)});if(null!=localStorage.getItem("imgCanvas")){const e=new Image;e.onload=function(){n.drawImage(e,0,0)},e.src=localStorage.getItem("imgCanvas")}a.mousemove(function(t){i.x=t.pageX-this.offsetLeft,i.y=t.pageY-this.offsetTop,1==e&&(n.strokeStyle="paint"==o?r.val():"white",n.lineTo(i.x,i.y),n.stroke())}),a.mouseup(function(){e=!1}),a.mouseleave(function(){e=!1});c.click(function(){"paint"==o?(o="erase",c.css("background-color","red")):(c.css("background-color","white"),o="paint")}),$("#slider").slider({min:3,max:30,slide:function(e,o){$("#circle").height(o.value),$("#circle").width(o.value),n.lineWidth=o.value}}),r.change(function(){u.css("background-color",$(this).val())}),s.click(function(){null!=typeof localStorage?localStorage.setItem("imgCanvas",t[0].toDataURL()):window.alert("Your browser does support local storage!")}),l.click(function(){n.clearRect(0,0,t[0].width,t[0].height)})});